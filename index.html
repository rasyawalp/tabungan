<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tabungan</title>
  <style>
    :root {
      --bg1:#dbeafe;--bg2:#f0f9ff;--accent:#2563eb;--danger:#dc2626;
      --card:#fff;--muted:#6b7280;
    }
    *{box-sizing:border-box}
    body{
      font-family:"Poppins",sans-serif;
      margin:0;padding:20px;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      color:#0f172a;min-height:100vh;
      display:flex;flex-direction:column;align-items:center;
    }
    h1{margin:6px 0 18px;color:var(--accent)}
    .container{width:95%;max-width:720px}
    .card{
      background:var(--card);
      border-radius:12px;
      box-shadow:0 6px 18px rgba(2,6,23,0.08);
      padding:16px;
    }
    label{display:block;font-weight:600;color:#1e3a8a;margin-bottom:6px}
    input[type="text"],input[type="number"]{
      width:100%;padding:10px;border-radius:8px;border:1px solid #cfe7ff;margin-bottom:10px;
    }
    .btn{background:var(--accent);color:white;border:none;padding:9px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    .btn:hover{filter:brightness(.95)}
    .tabungan-item{
      margin-top:12px;padding:14px;border-radius:10px;background:#f8fbff;border:1px solid #e6f0ff;
    }
    .small{font-size:13px;color:var(--muted)}
    .progress-container{background:#eef5ff;border-radius:8px;overflow:hidden;height:14px;margin-top:8px}
    .progress-bar{height:100%;width:0%;transition:width .6s ease;background:linear-gradient(90deg,#3b82f6,#60a5fa)}
    .actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .action-box{
      flex:1 1 45%;background:white;border:1px solid #e0e7ff;border-radius:8px;padding:6px;
      display:flex;align-items:center;justify-content:center;gap:6px;
      cursor:pointer;font-size:14px;font-weight:600;color:#1e3a8a;
      box-shadow:0 2px 4px rgba(0,0,0,0.05);transition:background 0.2s;
    }
    .action-box:hover{background:#eff6ff}
    .action-box.danger{color:#dc2626}
    .total{margin-top:12px;font-weight:800;color:#0b4cd6}
  </style>
</head>
<body>
  <h1>üí∞ Tabungan</h1>

  <div class="container">
    <div class="card">
      <h2>Tambah Jenis Tabungan</h2>
      <label>Nama Tabungan</label>
      <input id="namaTabungan" type="text" placeholder="Contoh: Rumah, Liburan, Dana Kuliah">
      <label>Target (Rp)</label>
      <input id="targetTabungan" type="number" placeholder="Contoh: 10000000">
      <button class="btn" onclick="tambahTabungan()">Tambah</button>

      <div id="daftarTabungan" style="margin-top:18px"></div>
      <div class="total" id="totalSemua">Total terkumpul: Rp 0</div>
    </div>
  </div>

  <script>
    let tabunganList = JSON.parse(localStorage.getItem('tabunganList') || '[]');

    function simpan(){
      localStorage.setItem('tabunganList', JSON.stringify(tabunganList));
      renderTabungan();
    }

    function renderTabungan(){
      const c=document.getElementById('daftarTabungan');c.innerHTML='';
      let total=0;
      tabunganList.forEach((t,i)=>{
        total += t.terkumpul;
        const persen = t.target?Math.min((t.terkumpul/t.target)*100,100).toFixed(1):0;
        const item=document.createElement('div');item.className='tabungan-item';
        item.innerHTML=`
          <div style="font-weight:800">${escapeHtml(t.nama)}</div>
          <div class="small">Rp ${fmt(t.terkumpul)} / Rp ${fmt(t.target)} ‚Äî ${persen}%</div>
          <div class="progress-container"><div class="progress-bar" style="width:${persen}%;"></div></div>
          <div class="actions">
            <div class="action-box" onclick="tambahUang(${i})">‚ûï Tambah</div>
            <div class="action-box" onclick="kurangiUang(${i})">‚ûñ Kurangi</div>
            <div class="action-box" onclick="editTabungan(${i})">‚úèÔ∏è Edit</div>
            <div class="action-box danger" onclick="hapusTabungan(${i})">üóëÔ∏è Hapus</div>
          </div>
        `;
        c.appendChild(item);
      });
      document.getElementById('totalSemua').textContent=`Total terkumpul: Rp ${fmt(total)}`;
    }

    // CRUD
    function tambahTabungan(){
      const nama = document.getElementById('namaTabungan').value.trim();
      const target = parseFloat(document.getElementById('targetTabungan').value);
      if(!nama || isNaN(target) || target<=0){alert('Isi nama & target valid');return;}
      tabunganList.push({nama,target,terkumpul:0});
      document.getElementById('namaTabungan').value='';
      document.getElementById('targetTabungan').value='';
      simpan();
    }
    function tambahUang(i){
      const val=prompt('Tambah uang (Rp):');
      const n=parseFloat(val);
      if(isNaN(n)||n<=0)return alert('Nominal tidak valid');
      tabunganList[i].terkumpul+=n;
      simpan();
    }
    function kurangiUang(i){
      const val=prompt('Kurangi uang (Rp):');
      const n=parseFloat(val);
      if(isNaN(n)||n<=0)return alert('Nominal tidak valid');
      tabunganList[i].terkumpul=Math.max(0,tabunganList[i].terkumpul-n);
      simpan();
    }
    function editTabungan(i){
      const nama=prompt('Ubah nama:',tabunganList[i].nama);
      if(nama!==null&&nama.trim()!=='')tabunganList[i].nama=nama.trim();
      const target=parseFloat(prompt('Ubah target (Rp):',tabunganList[i].target));
      if(!isNaN(target)&&target>0)tabunganList[i].target=target;
      simpan();
    }
    function hapusTabungan(i){
      if(confirm('Hapus tabungan "'+tabunganList[i].nama+'"?')){
        tabunganList.splice(i,1);
        simpan();
      }
    }

    const fmt=n=>Math.round(n).toLocaleString('id-ID');
    const escapeHtml=s=>String(s).replace(/[&<>"'`]/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#x60;'}[m]));
    renderTabungan();
  </script>
</body>
</html>
